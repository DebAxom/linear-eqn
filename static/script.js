var write=function(e){return document.getElementById("ans").innerHTML+=e+"<br>"},clear=function(){return document.getElementById("ans").innerHTML=""},isConstant=function(e){return!!Number(evalWithoutError(e))};function evalWithoutError(value){try{return eval(value)}catch(e){return value}}function PositiveNegative(e){return"-"!=(e=String(e)).charAt(0)?"-"+e:e.replace("-","")}function FindCoeefficient(e){if("x"===e)return"1";if("-x"===e)return"-1";if(e.indexOf("/")>-1){var t=e.split("/"),n=t[0],r=t[1];return(n=1!==n.length?n.replace("x",""):n.replace("x","1"))/(r=1!==r.length?r.replace("x",""):r.replace("x","1"))}return e.replace("x","")}function Multiplication_Division(term){if(term.indexOf("*")<-1||term.indexOf("/")>-1)return term;try{var returnValue=eval(term);return returnValue}catch(e){return term}}function EvaluateBracket(string,beforeBracket){var terms=string.split("+"),consts=[],vars=[];return terms.forEach((function(e){isConstant(e)?consts.push(e):vars.push(FindCoeefficient(e))})),consts=beforeBracket*eval(consts.join("+")),vars=beforeBracket*eval(vars.join("+")),"".concat(vars,"x + ").concat(consts)}function Separate_Vars_Consts(e,t){var n=[],r=[];e.forEach((function(e){0!=(e=Multiplication_Division(e))&&(isConstant(e)?r.push(e):n.push(PositiveNegative(e)))})),t.forEach((function(e){e=Multiplication_Division(e),isConstant(e)?r.push(PositiveNegative(e)):n.push(e)}));var i="=> ".concat(n.join("+")," = ").concat(r.join("+")).replace(/\+\-/g,"-");return write(i),{LHS:n,RHS:r}}function Equate(LHS,RHS){RHS=eval(RHS.join("+")),LHS=eval(LHS.map((function(e){return FindCoeefficient(e)})).join("+")),write("=> x = ".concat(RHS,"/").concat(LHS)),write("=> x = ".concat(RHS/LHS))}function SolveEquation(e){var t=(e=(e=e.replace(/ /g,"")).replace(new RegExp("-","g"),"+-")).match(/[0-9]+\((.*?)\)/g);null!=t&&(t.forEach((function(t){var n=t.split("(")[0],r=t.split("(")[1].replace(")","");e=e.replace(t,EvaluateBracket(r,n))})),write("=> ".concat(e.replace(/\+\-/g,"-"))));var n=e.split("="),r=n[0],i=n[1],a=r.split("+"),o=Separate_Vars_Consts(i.split("+"),a);Equate(o.LHS,o.RHS)}function Solve(){try{var e=document.getElementById("eqn").value,t=document.getElementById("ans");clear(),t.style.padding="0.5rem",write("f(x)= ".concat(e)),SolveEquation(e)}catch(e){console.log(e),ans.innerHTML="Sorry, an error occured. <br> This program is still in it's development stage."}return!1}window.solve=Solve;
